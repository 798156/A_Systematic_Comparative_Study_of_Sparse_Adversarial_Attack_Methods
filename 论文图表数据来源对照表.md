# 论文图表数据来源对照表

> **说明**: 这个表格列出了论文中每一个图表/表格的数据来源和生成脚本

---

## 第6章：实验结果与分析

### 6.1 基础性能评估

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **表6.1** | LaTeX表格 | 5方法性能对比 | `results/complete_baseline/*.json` | `analyze_all_5methods.py` | `results/analysis_5methods/latex_table_5methods.tex` |
| **图6.1** | 柱状图 | ASR对比 | 同上 | 同上 | `results/analysis_5methods/asr_comparison_5methods.pdf` |
| **图6.2** | 柱状图 | L0范数对比 | 同上 | 同上 | `results/analysis_5methods/l0_comparison_5methods.pdf` |
| **图6.3** | 散点图 | 效率分析 | 同上 | 同上 | `results/analysis_5methods/efficiency_scatter_5methods.pdf` |
| **图6.4** | 热图 | 方法-模型热图 | 同上 | 同上 | `results/analysis_5methods/asr_heatmap_5methods.pdf` |

**原始数据**:
```
results/complete_baseline/
├── resnet18_jsma.json
├── resnet18_sparsefool.json
├── resnet18_greedy.json
├── resnet18_pixelgrad.json
├── resnet18_randomsparse.json
├── vgg16_jsma.json
├── vgg16_sparsefool.json
├── vgg16_greedy.json
├── vgg16_pixelgrad.json
├── vgg16_randomsparse.json
├── mobilenetv2_jsma.json
├── mobilenetv2_sparsefool.json
├── mobilenetv2_greedy.json
├── mobilenetv2_pixelgrad.json
└── mobilenetv2_randomsparse.json
```

**生成命令**:
```bash
# 1. 生成原始数据（约30分钟，100样本）
python complete_baseline_5methods.py

# 2. 生成分析报告和图表
python analyze_all_5methods.py
```

---

### 6.2 参数敏感性分析

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **图6.5** | 折线图 | ASR敏感性 | `results/parameter_sensitivity/*.json` | `analyze_parameter_sensitivity.py` | `results/parameter_sensitivity/asr_sensitivity_comparison.pdf` |
| **图6.6** | 折线图 | L0敏感性 | 同上 | 同上 | `results/parameter_sensitivity/l0_sensitivity_comparison.pdf` |
| **图6.7** | 箱线图 | 稳定性分析 | 同上 | 同上 | `results/parameter_sensitivity/stability_analysis.pdf` |

**原始数据**:
```
results/parameter_sensitivity/
├── sensitivity_results_jsma.json        # JSMA参数扫描结果
├── sensitivity_results_sparsefool.json  # SparseFool参数扫描结果
└── sensitivity_results_greedy.json      # Greedy参数扫描结果
```

**参数配置**:
- JSMA: `theta=[0.01, 0.05, 0.1, 0.2]`, `gamma=[0.5, 0.8, 1.0]`
- SparseFool: `max_iterations=[10, 20, 50, 100]`
- Greedy: `perturbation=[0.05, 0.1, 0.2, 0.5]`

**生成命令**:
```bash
# 一键生成所有数据和图表（约15分钟）
python analyze_parameter_sensitivity.py
```

---

### 6.3 防御模型鲁棒性

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **表6.2** | 表格 | 防御梯度对比 | `results/multi_defense_models/*.json` | `create_complete_defense_comparison.py` | `results/complete_defense_comparison/complete_defense_comparison.md` |
| **图6.8** | 分组柱状图 | 防御梯度可视化 | 同上 | 同上 | `results/complete_defense_comparison/defense_gradient_comparison.pdf` |
| **图6.9** | 热图 | 方法鲁棒性 | 同上 | 同上 | `results/complete_defense_comparison/method_robustness_comparison.pdf` |

**原始数据**:
```
results/multi_defense_models/
├── standard_results.json              # 标准模型（无防御）
├── engstrom2019robustness_results.json # Engstrom2019（中等防御）
└── rice2020overfitting_results.json   # Rice2020（强防御）
```

**防御模型**:
- Standard: RobustBench标准模型
- Engstrom2019Robustness: L∞ ε=8/255
- Rice2020Overfitting: TRADES训练

**生成命令**:
```bash
# 1. 测试防御模型（约20分钟，100样本×3模型）
python test_multiple_defense_models.py

# 2. 生成对比分析
python create_complete_defense_comparison.py
```

**关键发现**:
```
Standard    → Engstrom2019 → Rice2020
JSMA:  81% →     19%      →    12%
SparseFool: 75% →  26%     →    22%  (最鲁棒)
Greedy:    76% →     13%      →     7%
```

---

### 6.4 失败案例分析

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **图6.10** | 饼图 | 样本难度分布 | `results/complete_baseline/*.json` | `analyze_failure_cases.py` | `results/failure_analysis/difficulty_distribution.pdf` |
| **图6.11** | 柱状图 | 方法失败率 | 同上 | 同上 | `results/failure_analysis/method_failure_rates.pdf` |
| **图6.12** | 堆叠柱状图 | 失败案例分布 | 同上 | 同上 | `results/failure_analysis/failure_distribution.pdf` |

**数据统计**:
- 硬样本（5方法全失败）: 7个
- 部分失败样本: 71个
- 易攻击样本: 22个

**生成命令**:
```bash
python analyze_failure_cases.py
```

**报告位置**: `results/failure_analysis/failure_analysis_report.md`

---

### 6.5 类别级分析

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **图6.13** | 柱状图 | 类别难度排名 | `results/complete_baseline/*.json` | `analyze_class_specific_asr.py` | `results/class_analysis/class_difficulty_ranking.pdf` |
| **图6.14** | 分组柱状图 | 类别ASR对比 | 同上 | 同上 | `results/class_analysis/class_comparison.pdf` |
| **图6.15** | 热图 | 类别-方法热图 | 同上 | 同上 | `results/class_analysis/class_asr_heatmap.pdf` |
| **图6.16a-e** | 混淆矩阵 | 5方法混淆矩阵 | 重新生成的对抗样本 | `generate_confusion_matrices.py` | `results/class_analysis/confusion_jsma.pdf` (等5个) |
| **图6.17** | 网格图 | 混淆矩阵汇总 | 同上 | 同上 | `results/class_analysis/confusion_matrices_new.pdf` |

**类别难度排名**:
1. Truck (卡车) - 42.2% - 最难 
2. Frog (青蛙) - 54.4%
3. Dog (狗) - 60.0%
4. Ship (船) - 60.0%
5. Automobile (汽车) - 60.0%
6. Deer (鹿) - 68.6%
7. Horse (马) - 68.9%
8. Cat (猫) - 70.0%
9. Airplane (飞机) - 72.7%
10. Bird (鸟) - 77.5% - 最易 

**生成命令**:
```bash
# 1. 类别级ASR分析
python analyze_class_specific_asr.py

# 2. 混淆矩阵生成（约30分钟，重新攻击成功样本）
python generate_confusion_matrices.py
```

**关键发现**: 100% Cat→Dog混淆（所有猫都被误分类为狗）

---

### 6.6 对抗样本可视化

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **图6.18a** | 4×5网格 | 样本1可视化 | 现场生成 | `visualize_adversarial_examples.py` | `results/adversarial_visualization/comparison_sample_3.pdf` |
| **图6.18b** | 4×5网格 | 样本2可视化 | 同上 | 同上 | `results/adversarial_visualization/comparison_sample_4.pdf` |
| **图6.19a** | 热图 | 样本1像素热图 | 同上 | 同上 | `results/adversarial_visualization/heatmap_sample_3.pdf` |
| **图6.19b** | 热图 | 样本2像素热图 | 同上 | 同上 | `results/adversarial_visualization/heatmap_sample_4.pdf` |
| **图6.20** | 聚合热图 | 5方法聚合热图 | 同上 | 同上 | `results/adversarial_visualization/aggregated_heatmap.pdf` |

**可视化内容**:
- 每个样本显示: 原图 → JSMA → SparseFool → Greedy → PixelGrad → RandomSparse
- 每个方法显示: 对抗图像 + 扰动可视化 + 像素热图

**生成命令**:
```bash
# 生成5个样本的完整可视化（约5分钟）
python visualize_adversarial_examples.py
```

**输出**: 24个文件（5样本×4图表 + 1聚合 + 1网格，PDF+PNG双格式）

---

### 6.7 查询效率分析

| 图表编号 | 类型 | 说明 | 数据来源 | 生成脚本 | 文件路径 |
|---------|------|------|----------|----------|----------|
| **图6.21** | 柱状图 | 时间效率对比 | `results/complete_baseline/*.json` | `analyze_query_efficiency.py` | `results/query_efficiency/time_efficiency_comparison.pdf` |
| **图6.22** | 柱状图 | 查询次数估计 | 同上 | 同上 | `results/query_efficiency/query_count_estimation.pdf` |
| **图6.23** | 散点图 | ASR-时间权衡 | 同上 | 同上 | `results/query_efficiency/asr_vs_time_tradeoff.pdf` |

**关键数据**:
```
方法          平均时间    查询次数估计
Greedy        0.082s     ~15次
JSMA          0.438s     ~7次
PixelGrad     0.093s     ~20次
SparseFool    0.148s     ~10次
RandomSparse  0.192s     ~30次
```

**生成命令**:
```bash
python analyze_query_efficiency.py
```

---

## 数据完整性检查

### 所有JSON数据文件（60个）

```
results/complete_baseline/          (15个，基础数据)
results/parameter_sensitivity/      (5个，敏感性分析)
results/multi_defense_models/       (3个，防御测试)
results/class_analysis/             (1个，混淆矩阵)
```

### 所有图表文件（80个PDF + 80个PNG）

```
results/analysis_5methods/          (8个图表，4 PDF+PNG)
results/parameter_sensitivity/      (6个图表，3 PDF+PNG)
results/complete_defense_comparison/ (4个图表，2 PDF+PNG)
results/failure_analysis/           (6个图表，3 PDF+PNG)
results/class_analysis/             (32个图表，16 PDF+PNG)
results/adversarial_visualization/  (10个图表，5 PDF+PNG)
results/query_efficiency/           (6个图表，3 PDF+PNG)
```

---

## 快速重现指南

### 完整实验重现（约2小时）

```bash
# 1. 基础性能评估（30分钟）
python complete_baseline_5methods.py
python analyze_all_5methods.py

# 2. 参数敏感性（15分钟）
python analyze_parameter_sensitivity.py

# 3. 防御模型测试（20分钟）
python test_multiple_defense_models.py
python create_complete_defense_comparison.py

# 4. 失败案例分析（5分钟）
python analyze_failure_cases.py

# 5. 类别级分析（40分钟）
python analyze_class_specific_asr.py
python generate_confusion_matrices.py

# 6. 对抗样本可视化（5分钟）
python visualize_adversarial_examples.py

# 7. 查询效率分析（5分钟）
python analyze_query_efficiency.py
```

### 仅更新图表（约10分钟）

```bash
# 如果数据已存在，只需重新生成图表
python analyze_all_5methods.py
python create_complete_defense_comparison.py
python analyze_failure_cases.py
python analyze_class_specific_asr.py
python analyze_query_efficiency.py
```

---

## 论文中的表格

| 表格编号 | 说明 | LaTeX源文件 | 数据来源 |
|---------|------|-------------|----------|
| **表5.1** | 攻击方法配置 | 手动编写 | - |
| **表5.2** | 数据集统计 | 手动编写 | - |
| **表6.1** | 5方法性能对比 | `results/analysis_5methods/latex_table_5methods.tex` | `complete_baseline_5methods.py` |
| **表6.2** | 防御梯度对比 | 从Markdown转换 | `create_complete_defense_comparison.py` |
| **表6.3** | 类别难度排名 | 从Markdown转换 | `analyze_class_specific_asr.py` |

---

## 数据备份建议

### 核心数据（必须备份）

```
results/complete_baseline/          # 2.5MB，15个JSON
results/parameter_sensitivity/      # 1.2MB，5个JSON
results/multi_defense_models/       # 1.8MB，3个JSON
results/class_analysis/confusion_matrices.json  # 50KB
```

**总大小**: 约5.5MB（压缩后<1MB）

### 图表备份（建议备份）

```
results/*/*.pdf                     # 所有PDF图表，约40MB
```

### 备份命令

```bash
# 创建数据备份
mkdir backup_$(date +%Y%m%d)
cp -r results/complete_baseline backup_$(date +%Y%m%d)/
cp -r results/parameter_sensitivity backup_$(date +%Y%m%d)/
cp -r results/multi_defense_models backup_$(date +%Y%m%d)/
cp -r results/class_analysis backup_$(date +%Y%m%d)/

# 或者直接压缩
tar -czf paper_data_backup_$(date +%Y%m%d).tar.gz \
    results/complete_baseline/ \
    results/parameter_sensitivity/ \
    results/multi_defense_models/ \
    results/class_analysis/
```

---













